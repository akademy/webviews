var akademy=akademy||{};akademy.webviews=akademy.webviews||function(e){var t={views:[{url:"http://wouldlike.gift",title:"loaded but restricted"},{url:"http://blog.akademy.co.uk/2017/04/webviews-seeing-all-your-website/"},{url:"https://bitbucket.org/akademy/webviews",title:"3 Embed Not Allowed",openFull:!0},{url:"httpf://error.example.com",title:"4 Error Bad schema"},{url:"http://!$&'()*+,;=.com",title:"Error Bad URL"},{url:"http://qweetergfsadgdvvbboisfgergerhjokjnmtn.com",title:"Unknown website"},{url:"http:/local",title:"Text found",textCheck:"Not Found"},{url:"http://127.0.0.1",title:"OK"}],width:206,height:136,scale:.2,element:document.body,autoReload:0},r={w:(e=e||{}).width||t.width,h:e.height||t.height},i=e.scale||t.scale,o={w:r.w*(1/i),h:r.h*(1/i)},a=e.element||t.element,d=e.views||t.views,n=e.autoReload||t.autoReload,l={w:4*r.w,h:4*r.h},s={w:window.innerWidth||document.body.clientWidth,h:window.innerHeight||document.body.clientHeight};l.w>s.w&&(l.w=s.w-120),l.h>s.h&&(l.h=s.h-50),window.addEventListener("message",function(e){console.log("A window message:",e)},!1),window.addEventListener("load",function(){function e(e,t){e.replaceChild(document.createTextNode("âŒ• zoom"),t),e.classList.add("hide")}function t(e){e.status="loading",this.parentNode.classList.add("loading");try{this.setAttribute("src",e.url)}catch(e){this.parentNode.classList.add("loaded-restricted")}}function s(e){if("loading"===e.status){var t=this.parentNode;t.classList.remove("loading"),e.status="loaded";try{var r=this.contentWindow||this.contentDocument;if(r.document&&(r=r.document),r.implementation&&r.body&&r.body.innerText&&0!==r.body.childElementCount?e.textCheck&&""!==e.textCheck&&-1===r.body.innerText.indexOf(e.textCheck)?t.classList.add("loaded-errored"):t.classList.add("loaded-ok"):t.classList.add("loaded-errored"),e.autoReload>0||n>0){var i=n;e.autoReload>0&&(i=e.autoReload),i>0&&h(this,e,1e3*i)}}catch(e){t.classList.add("loaded-restricted")}}}function c(e){e.status="errored",this.parentNode.classList.add("error")}function p(e){return b(e),!1}function u(e){w(e)}function m(e,t){h(e,t)}function h(e,r,i){r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(t.bind(e,r),i||50)}function b(e){e.parentNode.classList.add("full"),e.setAttribute("scrolling","yes")}function w(e){e.parentNode.classList.remove("full"),e.setAttribute("scrolling","no")}var f=document.createElement("style");f.appendChild(document.createTextNode(" .iframe-wrap, iframe-wrap * {box-sizing:content-box !important;} .iframe-wrap *.hide {display:block !important;} .iframe-wrap {width:"+r.w+"px;height:"+(r.h+25)+"px;padding:0;margin:0;display:inline-block;background-color:white;margin:5px;border:3px solid black} .iframe-wrap.full {position:absolute;top:20px;left:20px;border:0} .iframe-wrap.loading { border-color: blue; } .iframe-wrap.loaded-ok { border-color: limegreen; } .iframe-wrap.loaded-restricted { border-color: #e5d610; } .iframe-wrap.loaded-errored { border-color: red; } .iframe-wrap.error { border-color: #f55; } .iframe-wrap a {width:"+r.w+"px;height:"+r.h+"px;padding:0;margin:0;display:block;position:absolute;background-color:transparent;text-align:center;font-size:20px;font-weight:bold;cursor:hand;margin-top:0} .iframe-wrap a:hover {background-color: rgba(0,0,0,0.5);color:white;} .iframe-wrap a.hide {color: transparent } .iframe-wrap a:hover.hide {color: white } .iframe-wrap p {position:relative; color:black; top:"+r.h+"px; margin:4px 4px;} .iframe-wrap button {visibility:hidden;z-index:200;width:59px;background-color:rgb(239, 240, 241);border:1px;} .iframe-wrap .buttons {margin-top:-18px;} .iframe-wrap.full .buttons {margin-top:0;left:"+(l.w-118)+"px;position:relative;} .iframe-wrap.full button {visibility:visible;} .iframe-wrap.full a:hover, .iframe-wrap.full a:hover.hide {background-color: rgba(0,0,0,0);color:transparent;} .iframe-wrap iframe {width:"+o.w+"px;height:"+o.h+"px;transform: scale("+i+"); position:absolute; transform-origin:0 0; overflow:hidden; background-color:white; border-color:black;margin-top:0px} .iframe-wrap.full iframe {width:"+l.w+";height:"+l.h+"px;transform: scale(1);z-index:100;overflow:auto;margin-top:0px} .iframe-wrap.loading iframe { /*display:none*/ } .iframe-wrap.loaded iframe { /*display:block*/ }")),a.appendChild(f);for(var g=0;g<d.length;g++){var x=d[g];x.status="none",x.title||(x.title="No title. (Webview"+(g+1)+")");var v=document.createElement("div"),k=document.createElement("div"),y=document.createElement("iframe"),C=document.createElement("a"),A=document.createTextNode(x.title),E=document.createElement("p"),N=document.createTextNode(x.title),L=document.createElement("br"),T=document.createElement("button"),R=document.createTextNode("âœ•"),z=document.createElement("button"),W=document.createTextNode("â†»");v.setAttribute("class","iframe-wrap"),v.setAttribute("id","iframe-wrap-"+g),k.setAttribute("class","buttons"),y.setAttribute("src",""),y.setAttribute("scrolling","no"),y.setAttribute("seamless","seamless"),y.setAttribute("id","iframe-"+g),y.onload=s.bind(y,x),y.onerror=c.bind(y,x),C.setAttribute("href",x.url),C.setAttribute("target","_blank"),C.setAttribute("alt",x.title+" : "+x.url),x.openFull||(C.onclick=p.bind(C,y)),T.setAttribute("id","close"),T.onclick=u.bind(T,y),z.setAttribute("id","refresh"),z.onclick=m.bind(z,y,x),T.appendChild(R),z.appendChild(W),k.appendChild(T),k.appendChild(z),C.appendChild(L),C.appendChild(A),E.appendChild(N),v.appendChild(k),v.appendChild(y),v.appendChild(C),v.appendChild(E),a.appendChild(v),h(y,x,50*(g+1)),setTimeout(e.bind(this,C,A),2500)}},!1)};